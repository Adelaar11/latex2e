

\RequirePackage[enable-debug]{expl3}
\ExplSyntaxOn
\debug_on:n { check-declarations , deprecation }
\ExplSyntaxOff

\documentclass{article}

\input{regression-test}



\START


\AddToHook     {sffamily}[legacy] {Std sffamily code}
\AddToHook     {sffamily}[foo] {foo code}
\AddToHook     {sffamily}[bar] {bar code}
\AddToHookNext {sffamily} {first occasion only}

\DeclareHookRule {sffamily} {foo} {after} {bar}
\DeclareHookRule {sffamily} {baz} {removes} {foo}
\DeclareHookRule {rmfamily} {1} {before} {2}


\ExplSyntaxOn
\prop_show:c{g__hook_sffamily_code_prop}
\ExplSyntaxOff

\ShowHook{sffamily}

\begin{document}

\sffamily
\ShowHook{sffamily}

\AddToHook     {sffamily}[baz] {baz code}
\ShowHook{sffamily}

\ExplSyntaxOn
\prop_show:c{g__hook_sffamily_code_prop}
\ExplSyntaxOff

\ShowHook{sffamily}

\ShowHook{enddocument}

\typeout{--- New hook after begin document ---}

\NewHook{xxx}

\ShowHook{xxx}

\UseHook{xxx}

\AddToHook{xxx}     {\typeout{some code ...}}
\AddToHook{xxx}[foo]{\typeout{some foo code ...}}

\ShowHook{xxx}

\UseHook{xxx}

\RemoveFromHook{xxx}[*]

\ShowHook{xxx}



\END
