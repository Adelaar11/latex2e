

\RequirePackage[enable-debug]{expl3}
\ExplSyntaxOn
\debug_on:n { check-declarations , deprecation }
\ExplSyntaxOff

\documentclass{article}

\input{regression-test}

\DebugHookOn
\DebugShipoutOn

\START


\AddToHook     {sffamily}[legacy] {\typeout{Std sffamily code}}
\AddToHookNext {sffamily} {\typeout{+first occasion only}}

\begin{document}

\textsf{A}

\ExplSyntaxOn
\hook_gput_next_code:nn{sffamily}{\typeout{+extra}}
\ExplSyntaxOff

\textsf{B}  % normal plus new extra

\textsf{C}  % only normal again

\RemoveFromHook {sffamily} [legacy]
\AddToHookNext {sffamily} {\typeout{only this code}}

\textsf{D}  % only extra

\typeout{Nothing?}
\textsf{E}  % nothing

\end{document}
